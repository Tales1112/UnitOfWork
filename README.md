<div class="ast-post-format- ast-no-thumb single-layout-1" bis_skin_checked="1" style="height: auto !important;"><header class="entry-header ast-no-thumbnail ast-no-meta"><div class="ast-single-post-order" bis_skin_checked="1"><h1 class="entry-title" itemprop="headline">Unit Of Work in Repository Pattern</h1></div></header><div class="entry-content clear" itemprop="text" bis_skin_checked="1" style="height: auto !important;"><p class="llms-parent-course-link">Back to: <a class="llms-lesson-link" href="https://dotnettutorials.net/course/dot-net-design-patterns/">Design Patterns in C# With Real-Time Examples</a></p><div class="code-block code-block-1 ai-viewport-1 ai-viewport-2" style="margin: 8px auto 8px 0; text-align: left; display: block; clear: both;" bis_skin_checked="1"><div class="container" bis_skin_checked="1"><div class="row" bis_skin_checked="1"><div class="col-md-6 col-lg-6 col-sm-6" bis_skin_checked="1">
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-5996718494925719" data-ad-slot="2662762526" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done" data-ad-status="filled"><ins id="aswift_2_expand" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_2_anchor" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block; overflow: visible;"><iframe id="aswift_2" name="aswift_2" style="top: 0px; border: 0px; width: 389px; height: 280px; left: -10000px !important; position: absolute !important;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="389" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5996718494925719&amp;output=html&amp;h=280&amp;slotname=2662762526&amp;adk=3044596481&amp;adf=1664109869&amp;pi=t.ma~as.2662762526&amp;w=389&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1630832814&amp;rafmt=1&amp;psa=1&amp;format=389x280&amp;url=https%3A%2F%2Fdotnettutorials.net%2Flesson%2Funit-of-work-csharp-mvc%2F&amp;flash=0&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;adsid=ChEI8JyWigYQ-qXejJrQzMrtARJMAA24gBL76eJNMGRsYSbaLIveb8EtOm03KXzkkjr5uyAzvxt0Xb3R62mGbMn8TGlAkNKjkOZAk5D4rTg1M6wINWgUQJjlEJ_zraJuTg&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjkyLjAuNDUxNS4xMzEiLFtdLG51bGwsbnVsbCxudWxsXQ..&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hdHRlc3RhdGlvbi5hbmRyb2lkLmNvbSIsInN0YXRlIjo3fV0.&amp;dt=1631994736545&amp;bpp=4&amp;bdt=190&amp;idt=327&amp;shv=r20210915&amp;mjsv=m202109170101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Db053040118017feb-22274f0757ca00e5%3AT%3D1631993152%3ART%3D1631993152%3AS%3DALNI_MaCcRtTD8PQWV3P4rf7M3m5HKFUtw&amp;prev_fmts=0x0%2C839x104%2C839x503%2C239x600%2C389x280%2C389x280%2C389x280&amp;nras=2&amp;correlator=1322494233562&amp;frm=20&amp;pv=1&amp;ga_vid=1140958189.1631993152&amp;ga_sid=1631994737&amp;ga_hid=1407760011&amp;ga_fc=0&amp;u_tz=-180&amp;u_his=4&amp;u_java=0&amp;u_h=720&amp;u_w=1280&amp;u_ah=680&amp;u_aw=1280&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=407&amp;ady=263&amp;biw=1263&amp;bih=609&amp;scr_x=0&amp;scr_y=945&amp;eid=44747620%2C44750894%2C21067496&amp;oid=3&amp;psts=AGkb-H90F69UvkGiZKy3xkO7_houbLd4F8jyYQ7X2AXAHbB-k8vexhAvs1j_hF08ff370vTkwNYs4422HLh0J_g%2CAGkb-H90Bg0EBmbHRjNRlWqGdW8tlMooaB2Bhuij67nVKdc3hi7w66y5eatrvV58814N5n88elps6s2Xjs0mEDo&amp;pvsid=4376420000064149&amp;pem=208&amp;ref=https%3A%2F%2Fwww.google.com%2F&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1280%2C0%2C1280%2C680%2C1280%2C609&amp;vis=1&amp;rsz=%7C%7CpeE%7C&amp;abl=CS&amp;pfx=0&amp;cms=2&amp;fu=128&amp;bc=31&amp;jar=2021-09-18-19&amp;ifi=3&amp;uci=a!3&amp;fsb=1&amp;xpc=Uhb19wdeca&amp;p=https%3A//dotnettutorials.net&amp;dtd=3423" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!3" bis_size="{&quot;x&quot;:406,&quot;y&quot;:263,&quot;w&quot;:389,&quot;h&quot;:280,&quot;abs_x&quot;:406,&quot;abs_y&quot;:263}" bis_id="fr_mwdjfd1gpkr42t6q1g4o97" bis_depth="0" bis_chainid="6" data-google-query-id="CL6wiZamifMCFS8A0AQdjJIAOw" data-load-complete="true"></iframe></ins></ins></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="col-md-6 col-lg-6 col-sm-6" bis_skin_checked="1">
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-5996718494925719" data-ad-slot="9192402071" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done" data-ad-status="filled"><ins id="aswift_3_expand" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_3_anchor" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block; overflow: visible;"><iframe id="aswift_3" name="aswift_3" style="top: 0px; border: 0px; width: 389px; height: 280px; left: -10000px !important; position: absolute !important;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="389" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5996718494925719&amp;output=html&amp;h=280&amp;slotname=9192402071&amp;adk=2107065784&amp;adf=2981228277&amp;pi=t.ma~as.9192402071&amp;w=389&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1630832814&amp;rafmt=1&amp;psa=1&amp;format=389x280&amp;url=https%3A%2F%2Fdotnettutorials.net%2Flesson%2Funit-of-work-csharp-mvc%2F&amp;flash=0&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;adsid=ChEI8JyWigYQ-qXejJrQzMrtARJMAA24gBL76eJNMGRsYSbaLIveb8EtOm03KXzkkjr5uyAzvxt0Xb3R62mGbMn8TGlAkNKjkOZAk5D4rTg1M6wINWgUQJjlEJ_zraJuTg&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjkyLjAuNDUxNS4xMzEiLFtdLG51bGwsbnVsbCxudWxsXQ..&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hdHRlc3RhdGlvbi5hbmRyb2lkLmNvbSIsInN0YXRlIjo3fV0.&amp;dt=1631994736550&amp;bpp=3&amp;bdt=196&amp;idt=331&amp;shv=r20210915&amp;mjsv=m202109170101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Db053040118017feb-22274f0757ca00e5%3AT%3D1631993152%3ART%3D1631993152%3AS%3DALNI_MaCcRtTD8PQWV3P4rf7M3m5HKFUtw&amp;prev_fmts=0x0%2C839x104%2C839x503%2C239x600%2C389x280%2C389x280&amp;nras=2&amp;correlator=1322494233562&amp;frm=20&amp;pv=1&amp;ga_vid=1140958189.1631993152&amp;ga_sid=1631994737&amp;ga_hid=1407760011&amp;ga_fc=0&amp;u_tz=-180&amp;u_his=4&amp;u_java=0&amp;u_h=720&amp;u_w=1280&amp;u_ah=680&amp;u_aw=1280&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=826&amp;ady=263&amp;biw=1263&amp;bih=609&amp;scr_x=0&amp;scr_y=945&amp;eid=44747620%2C44750894%2C21067496&amp;oid=3&amp;psts=AGkb-H90F69UvkGiZKy3xkO7_houbLd4F8jyYQ7X2AXAHbB-k8vexhAvs1j_hF08ff370vTkwNYs4422HLh0J_g%2CAGkb-H90Bg0EBmbHRjNRlWqGdW8tlMooaB2Bhuij67nVKdc3hi7w66y5eatrvV58814N5n88elps6s2Xjs0mEDo&amp;pvsid=4376420000064149&amp;pem=208&amp;ref=https%3A%2F%2Fwww.google.com%2F&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1280%2C0%2C1280%2C680%2C1280%2C609&amp;vis=1&amp;rsz=%7C%7CpeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;jar=2021-09-18-19&amp;ifi=4&amp;uci=a!4&amp;fsb=1&amp;xpc=3Magi1fQ3r&amp;p=https%3A//dotnettutorials.net&amp;dtd=3356" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!4" bis_size="{&quot;x&quot;:826,&quot;y&quot;:263,&quot;w&quot;:389,&quot;h&quot;:280,&quot;abs_x&quot;:826,&quot;abs_y&quot;:263}" bis_id="fr_xsuk3wqsspclsnp13nafcw" bis_depth="0" bis_chainid="7" data-google-query-id="CNLmhZamifMCFRLI4QodCTQACA" data-load-complete="true"></iframe></ins></ins></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><h2 style="text-align: justify;"><span style="font-size: 18pt; font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Unit of Work in Repository Pattern with an Example</strong></span></h2><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">In this article, I am going to discuss <strong>how to implement Unit Of Work in Repository Pattern</strong> with an example. The unit of work in C# implementation manages in-memory database CRUD operations on entities as one transaction. So, if one of the operations is failed then the entire database operations will be rollback.</span></p><p style="text-align: justify;"><span style="color: #000000;"><span style="font-family: arial, helvetica, sans-serif;"><strong>Unit of Work in C#</strong> is the concept that is related to the effective implementation of the <strong>Repository Design Pattern</strong>. So, to understand this concept it is important to understand the concept of the Repository Pattern. So, I strongly recommended you </span><span style="font-family: arial, helvetica, sans-serif;">read the following articles before proceeding to this article.</span></span></p><ol><li style="text-align: justify;"><strong><a href="https://dotnettutorials.net/lesson/basic-repository-pattern-csharp/"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><span style="color: #0000ff;">Non-Generic or basic Repository Design pattern.</span></span></a></strong></li><li style="text-align: justify;"><span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://dotnettutorials.net/lesson/generic-repository-pattern-csharp-mvc/"><span style="font-family: arial, helvetica, sans-serif;">Generic Repository Design Pattern.</span></a></strong></span></li><li style="text-align: justify;"><span style="color: #0000ff;"><strong><a style="color: #0000ff;" href="https://dotnettutorials.net/lesson/unit-of-work-csharp-mvc/"><span style="font-family: arial, helvetica, sans-serif;">Using both Generic and Non-Generic Repository patterns.</span></a></strong></span></li></ol><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>The Repository Design Pattern</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">As we already discussed in our previous articles, a repository is nothing but a class defined for an entity, with all the possible database operations. For example, a repository for an Employee entity will have the basic CRUD operations and any other possible operations related to the Employee entity. The Repository Pattern can be implemented in two ways:</span></p><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>One repository per entity (non-generic):&nbsp;</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: #000000;">This type of implementation involves the use of one repository class for each entity. For example, if you have two entities, Employee, and Customer, each entity will have its own repository.</span>&nbsp;</span></p><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Generic repository:</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: #000000;">A generic repository is one that can be used for all the entities. In other words, it can be either used for Employee or Customer or any other entity.</span></span></p><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Unit of Work in C# Repository Pattern</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">The Unit of Work pattern is used to group one or more operations (usually database CRUD operations) into a single transaction or “unit of work” so that all operations either pass or fail as one unit. In simple words we can say that for a specific user action, say booking on a website, all the transactions like insert/update/delete and so on are done in one single transaction, rather than doing multiple database transactions. This means, one unit of work here involves insert/update/delete operations, all in one single transaction so that all operations either pass or fail as one unit.</span></p><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">We are going to work with the same example that we used in our previous article. </span><span style="font-family: arial, helvetica, sans-serif; color: #000000;">Below is the code snippet for the Generic Repository class</span></p><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">class</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> : IGenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-k0">where</span><span class="enlighter-text"> T : </span><span class="enlighter-k0">class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> EmployeeDBContext _context = </span><span class="enlighter-e1">null</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> DbSet</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> table = </span><span class="enlighter-e1">null</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">GenericRepository</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">_context</span><span class="enlighter-text"> = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeDBContext</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            table = _context.</span><span class="enlighter-m3">Set</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">GenericRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeDBContext _context</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k9">this</span><span class="enlighter-text">.</span><span class="enlighter-m3">_context</span><span class="enlighter-text"> = _context;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            table = _context.</span><span class="enlighter-m3">Set</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetAll</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> table.</span><span class="enlighter-m3">ToList</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> T </span><span class="enlighter-m0">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-k0">object</span><span class="enlighter-text"> id</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> table.</span><span class="enlighter-m3">Find</span><span class="enlighter-g1">(</span><span class="enlighter-text">id</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Insert</span><span class="enlighter-g1">(</span><span class="enlighter-text">T obj</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            table.</span><span class="enlighter-m3">Add</span><span class="enlighter-g1">(</span><span class="enlighter-text">obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Update</span><span class="enlighter-g1">(</span><span class="enlighter-text">T obj</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            table.</span><span class="enlighter-m3">Attach</span><span class="enlighter-g1">(</span><span class="enlighter-text">obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _context.</span><span class="enlighter-m3">Entry</span><span class="enlighter-g1">(</span><span class="enlighter-text">obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">.</span><span class="enlighter-m3">State</span><span class="enlighter-text"> = EntityState.</span><span class="enlighter-m3">Modified</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-k0">object</span><span class="enlighter-text"> id</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            T existing = table.</span><span class="enlighter-m3">Find</span><span class="enlighter-g1">(</span><span class="enlighter-text">id</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            table.</span><span class="enlighter-m3">Remove</span><span class="enlighter-g1">(</span><span class="enlighter-text">existing</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _context.</span><span class="enlighter-m3">SaveChanges</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">namespace RepositoryUsingEFinMVC.GenericRepository
{
    public class GenericRepository&lt;T&gt; : IGenericRepository&lt;T&gt; where T : class
    {
        public EmployeeDBContext _context = null;
        public DbSet&lt;T&gt; table = null;

        public GenericRepository()
        {
            this._context = new EmployeeDBContext();
            table = _context.Set&lt;T&gt;();
        }

        public GenericRepository(EmployeeDBContext _context)
        {
            this._context = _context;
            table = _context.Set&lt;T&gt;();
        }

        public IEnumerable&lt;T&gt; GetAll()
        {
            return table.ToList();
        }

        public T GetById(object id)
        {
            return table.Find(id);
        }

        public void Insert(T obj)
        {
            table.Add(obj);
        }

        public void Update(T obj)
        {
            table.Attach(obj);
            _context.Entry(obj).State = EntityState.Modified;
        }

        public void Delete(object id)
        {
            T existing = table.Find(id);
            table.Remove(existing);
        }

        public void Save()
        {
            _context.SaveChanges();
        }
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">namespace RepositoryUsingEFinMVC.GenericRepository
{
    public class GenericRepository&lt;T&gt; : IGenericRepository&lt;T&gt; where T : class
    {
        public EmployeeDBContext _context = null;
        public DbSet&lt;T&gt; table = null;

        public GenericRepository()
        {
            this._context = new EmployeeDBContext();
            table = _context.Set&lt;T&gt;();
        }

        public GenericRepository(EmployeeDBContext _context)
        {
            this._context = _context;
            table = _context.Set&lt;T&gt;();
        }

        public IEnumerable&lt;T&gt; GetAll()
        {
            return table.ToList();
        }

        public T GetById(object id)
        {
            return table.Find(id);
        }

        public void Insert(T obj)
        {
            table.Add(obj);
        }

        public void Update(T obj)
        {
            table.Attach(obj);
            _context.Entry(obj).State = EntityState.Modified;
        }

        public void Delete(object id)
        {
            T existing = table.Find(id);
            table.Remove(existing);
        }

        public void Save()
        {
            _context.SaveChanges();
        }
    }
}
</pre><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">The code above seems to be fine. </span></p><h5><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Problem with the above Implementation:</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">The issue arises when we add a repository to another entity, say Product. In that case, both repositories will generate and maintain their own instance of the DbContext class. This may lead to issues in the future, since each DbContext will have its own in-memory list of changes of the records, of the entities, that are being added/updated/modified, in a single transaction/operation. In such a case, if the SaveChanges of one of the repositories fails and the other one succeeds, it will result in database inconsistency. This is where the concept of UnitOfWork is playing an important role.</span></p><div class="code-block code-block-2 ai-viewport-1 ai-viewport-2" style="margin: 8px auto 8px 0; text-align: left; display: block; clear: both;" bis_skin_checked="1"><div class="container" bis_skin_checked="1"><div class="row" bis_skin_checked="1"><div class="col-md-6 col-lg-6 col-sm-6" bis_skin_checked="1">
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-5996718494925719" data-ad-slot="2662762526" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done" data-ad-status="filled"><ins id="aswift_4_expand" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_4_anchor" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block; overflow: visible;"><iframe id="aswift_4" name="aswift_4" style="top: 0px; border: 0px; width: 389px; height: 280px; left: -10000px !important; position: absolute !important;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="389" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5996718494925719&amp;output=html&amp;h=280&amp;slotname=2662762526&amp;adk=3044596481&amp;adf=4182716662&amp;pi=t.ma~as.2662762526&amp;w=389&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1630832814&amp;rafmt=1&amp;psa=1&amp;format=389x280&amp;url=https%3A%2F%2Fdotnettutorials.net%2Flesson%2Funit-of-work-csharp-mvc%2F&amp;flash=0&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;adsid=ChEI8JyWigYQ-qXejJrQzMrtARJMAA24gBL76eJNMGRsYSbaLIveb8EtOm03KXzkkjr5uyAzvxt0Xb3R62mGbMn8TGlAkNKjkOZAk5D4rTg1M6wINWgUQJjlEJ_zraJuTg&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjkyLjAuNDUxNS4xMzEiLFtdLG51bGwsbnVsbCxudWxsXQ..&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hdHRlc3RhdGlvbi5hbmRyb2lkLmNvbSIsInN0YXRlIjo3fV0.&amp;dt=1631994736570&amp;bpp=2&amp;bdt=215&amp;idt=314&amp;shv=r20210915&amp;mjsv=m202109170101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Db053040118017feb-22274f0757ca00e5%3AT%3D1631993152%3ART%3D1631993152%3AS%3DALNI_MaCcRtTD8PQWV3P4rf7M3m5HKFUtw&amp;prev_fmts=0x0%2C839x104%2C839x503%2C239x600%2C389x280&amp;nras=2&amp;correlator=1322494233562&amp;frm=20&amp;pv=1&amp;ga_vid=1140958189.1631993152&amp;ga_sid=1631994737&amp;ga_hid=1407760011&amp;ga_fc=0&amp;u_tz=-180&amp;u_his=4&amp;u_java=0&amp;u_h=720&amp;u_w=1280&amp;u_ah=680&amp;u_aw=1280&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=407&amp;ady=2823&amp;biw=1263&amp;bih=609&amp;scr_x=0&amp;scr_y=4037&amp;eid=44747620%2C44750894%2C21067496&amp;oid=3&amp;psts=AGkb-H90F69UvkGiZKy3xkO7_houbLd4F8jyYQ7X2AXAHbB-k8vexhAvs1j_hF08ff370vTkwNYs4422HLh0J_g%2CAGkb-H90Bg0EBmbHRjNRlWqGdW8tlMooaB2Bhuij67nVKdc3hi7w66y5eatrvV58814N5n88elps6s2Xjs0mEDo&amp;pvsid=4376420000064149&amp;pem=208&amp;ref=https%3A%2F%2Fwww.google.com%2F&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1280%2C0%2C1280%2C680%2C1280%2C609&amp;vis=1&amp;rsz=%7C%7CpeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;jar=2021-09-18-19&amp;ifi=5&amp;uci=a!5&amp;fsb=1&amp;xpc=DZNAE6yX1W&amp;p=https%3A//dotnettutorials.net&amp;dtd=3202" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!5" bis_size="{&quot;x&quot;:406,&quot;y&quot;:2823,&quot;w&quot;:389,&quot;h&quot;:280,&quot;abs_x&quot;:406,&quot;abs_y&quot;:2823}" bis_id="fr_9bjza1x1xsl01n8dcflnfl" bis_depth="0" bis_chainid="4" data-google-query-id="CJfO_ZWmifMCFQcLwwodOaILAQ" data-load-complete="true"></iframe></ins></ins></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="col-md-6 col-lg-6 col-sm-6" bis_skin_checked="1">
<ins class="adsbygoogle" style="display: block; height: 280px;" data-ad-client="ca-pub-5996718494925719" data-ad-slot="5311603440" data-ad-format="auto" data-full-width-responsive="true" data-adsbygoogle-status="done" data-ad-status="filled"><ins id="aswift_5_expand" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_5_anchor" style="border: none; height: 280px; width: 389px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block; overflow: visible;"><iframe id="aswift_5" name="aswift_5" style="top: 0px; border: 0px; width: 389px; height: 280px; left: -10000px !important; position: absolute !important;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="389" height="280" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5996718494925719&amp;output=html&amp;h=280&amp;slotname=5311603440&amp;adk=728763453&amp;adf=3146623902&amp;pi=t.ma~as.5311603440&amp;w=389&amp;fwrn=4&amp;fwrnh=100&amp;lmt=1630832814&amp;rafmt=1&amp;psa=1&amp;format=389x280&amp;url=https%3A%2F%2Fdotnettutorials.net%2Flesson%2Funit-of-work-csharp-mvc%2F&amp;flash=0&amp;fwr=0&amp;fwrattr=true&amp;rpe=1&amp;resp_fmts=3&amp;wgl=1&amp;adsid=ChEI8JyWigYQ-qXejJrQzMrtARJMAA24gBL76eJNMGRsYSbaLIveb8EtOm03KXzkkjr5uyAzvxt0Xb3R62mGbMn8TGlAkNKjkOZAk5D4rTg1M6wINWgUQJjlEJ_zraJuTg&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjkyLjAuNDUxNS4xMzEiLFtdLG51bGwsbnVsbCxudWxsXQ..&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hdHRlc3RhdGlvbi5hbmRyb2lkLmNvbSIsInN0YXRlIjo3fV0.&amp;dt=1631994736573&amp;bpp=3&amp;bdt=218&amp;idt=402&amp;shv=r20210915&amp;mjsv=m202109170101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Db053040118017feb-22274f0757ca00e5%3AT%3D1631993152%3ART%3D1631993152%3AS%3DALNI_MaCcRtTD8PQWV3P4rf7M3m5HKFUtw&amp;prev_fmts=0x0%2C839x104%2C839x503%2C239x600&amp;nras=2&amp;correlator=1322494233562&amp;frm=20&amp;pv=1&amp;ga_vid=1140958189.1631993152&amp;ga_sid=1631994737&amp;ga_hid=1407760011&amp;ga_fc=0&amp;u_tz=-180&amp;u_his=4&amp;u_java=0&amp;u_h=720&amp;u_w=1280&amp;u_ah=680&amp;u_aw=1280&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=826&amp;ady=2823&amp;biw=1263&amp;bih=609&amp;scr_x=0&amp;scr_y=4037&amp;eid=44747620%2C44750894%2C21067496&amp;oid=3&amp;psts=AGkb-H90F69UvkGiZKy3xkO7_houbLd4F8jyYQ7X2AXAHbB-k8vexhAvs1j_hF08ff370vTkwNYs4422HLh0J_g%2CAGkb-H90Bg0EBmbHRjNRlWqGdW8tlMooaB2Bhuij67nVKdc3hi7w66y5eatrvV58814N5n88elps6s2Xjs0mEDo&amp;pvsid=4376420000064149&amp;pem=208&amp;ref=https%3A%2F%2Fwww.google.com%2F&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1280%2C0%2C1280%2C680%2C1280%2C609&amp;vis=1&amp;rsz=%7C%7CpeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;jar=2021-09-18-19&amp;ifi=6&amp;uci=a!6&amp;fsb=1&amp;xpc=9A5epGVqvX&amp;p=https%3A//dotnettutorials.net&amp;dtd=3014" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!6" bis_size="{&quot;x&quot;:826,&quot;y&quot;:2823,&quot;w&quot;:389,&quot;h&quot;:280,&quot;abs_x&quot;:826,&quot;abs_y&quot;:2823}" bis_id="fr_tg1hhmxr01qj3es4392j7i" bis_depth="0" bis_chainid="5" data-google-query-id="CK7k8ZWmifMCFQQGwwodFLkJ8A" data-load-complete="true"></iframe></ins></ins></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></div><h5><span style="color: #000000; font-family: arial, helvetica, sans-serif;"><strong>Solution To the above Problem:</strong></span></h5><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">To avoid this, we will add another layer or intermediate between the controller and the Generic/Non-Generic repository. This layer will act as a centralized store for all the repositories to receive the instance of the DbContext. This will ensure that, for a unit of transaction that spans across multiple repositories, it should either complete for all entities or should fail entirely, as all of them will share the same instance of the DbContext. In our above example, while adding data for the Employee and Product entities, in a single transaction, both will use the same DbContext instance. This situation, without and with the Unit of work, can be represented as in the following diagram.</span></p><p><img loading="lazy" class="alignnone wp-image-3978" title="Repository Design Pattern Without Unit of Work in C#" src="https://dotnettutorials.net/wp-content/uploads/2018/07/Without-Unit-Of-Work.png" alt="Repository Design Pattern Without Unit of Work in C#" width="480" height="242" srcset="https://dotnettutorials.net/wp-content/uploads/2018/07/Without-Unit-Of-Work.png 661w, https://dotnettutorials.net/wp-content/uploads/2018/07/Without-Unit-Of-Work-300x152.png 300w" sizes="(max-width: 480px) 100vw, 480px"></p><p><img loading="lazy" class="alignnone wp-image-3979" title="Unit of Work in C# Repository Pattern" src="https://dotnettutorials.net/wp-content/uploads/2018/07/With-Unit-of-work.png" alt="Unit of Work in C# Repository Pattern" width="648" height="240" srcset="https://dotnettutorials.net/wp-content/uploads/2018/07/With-Unit-of-work.png 959w, https://dotnettutorials.net/wp-content/uploads/2018/07/With-Unit-of-work-300x111.png 300w, https://dotnettutorials.net/wp-content/uploads/2018/07/With-Unit-of-work-768x284.png 768w" sizes="(max-width: 648px) 100vw, 648px"></p><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">In the above representation, during a single operation, that involves Employee and Product entities, both of them use the same DbContext instance. This will ensure that even if one of them breaks, the other one is also not saved, thus maintaining the database consistency. So when SaveChanges is executed, it will be done for both of the repositories.</span></p><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Let us understand the unit of work with one example.&nbsp;</strong></span></h5><div class="google-auto-placed ap_container" bis_skin_checked="1" style="width: 100%; height: auto; clear: both; text-align: center;"><ins data-ad-format="auto" class="adsbygoogle adsbygoogle-noablate" data-ad-client="ca-pub-5996718494925719" data-adsbygoogle-status="done" style="display: block; margin: auto; background-color: transparent; height: 250px;"><ins id="aswift_9_expand" style="border: none; height: 250px; width: 303px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;"><ins id="aswift_9_anchor" style="border: none; height: 250px; width: 303px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block;"></ins></ins></ins></div><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">Add a folder with the name UnitOfWork within the project. </span><span style="font-family: arial, helvetica, sans-serif; color: #000000;">Once the folder is added, add one interface with the name IUnitOfWork within the UnitOfWork folder and copy and paste the below code.</span></p><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Data.Entity;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.UnitOfWork</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">interface</span><span class="enlighter-text"> IUnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-k8">out</span><span class="enlighter-text"> TContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">where</span><span class="enlighter-text"> TContext : DbContext, </span><span class="enlighter-k3">new</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        TContext Context </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">get</span><span class="enlighter-text">; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">CreateTransaction</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Commit</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Rollback</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using System.Data.Entity;
namespace RepositoryUsingEFinMVC.UnitOfWork
{
    public interface IUnitOfWork&lt;out TContext&gt;
        where TContext : DbContext, new()
    {
        TContext Context { get; }
        void CreateTransaction();
        void Commit();
        void Rollback();
        void Save();
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using System.Data.Entity;
namespace RepositoryUsingEFinMVC.UnitOfWork
{
    public interface IUnitOfWork&lt;out TContext&gt;
        where TContext : DbContext, new()
    {
        TContext Context { get; }
        void CreateTransaction();
        void Commit();
        void Rollback();
        void Save();
    }
}
</pre><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">Next, add one class file with the name UnitOfWork within the UnitOfWork folder and then copy and paste the below code</span></p><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Data.Entity;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Data.Entity.Validation;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.UnitOfWork</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">class</span><span class="enlighter-text"> UnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> : IUnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">TContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">, IDisposable</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">         </span><span class="enlighter-k0">where</span><span class="enlighter-text"> TContext : DbContext, </span><span class="enlighter-k3">new</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //Here TContext is nothing but your DBContext class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //In our example it is EmployeeDBContext class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> </span><span class="enlighter-k0">readonly</span><span class="enlighter-text"> TContext _context;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> </span><span class="enlighter-k5">bool</span><span class="enlighter-text"> _disposed;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> string _errorMessage = string.</span><span class="enlighter-m3">Empty</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> DbContextTransaction _objTran;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> Dictionary</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">string, </span><span class="enlighter-k0">object</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> _repositories;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //Using the Constructor we are initializing the _context variable is nothing but</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //we are storing the DBContext (EmployeeDBContext) object in _context variable</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">UnitOfWork</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _context = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">TContext</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //The Dispose() method is used to free unmanaged resources like files, </span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //database connections etc. at any time.</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Dispose</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-m0">Dispose</span><span class="enlighter-g1">(</span><span class="enlighter-e0">true</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            GC.</span><span class="enlighter-m3">SuppressFinalize</span><span class="enlighter-g1">(</span><span class="enlighter-k9">this</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //This Context property will return the DBContext object i.e. (EmployeeDBContext) object</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> TContext Context</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">get</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">return</span><span class="enlighter-text"> _context; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //This CreateTransaction() method will create a database Trnasaction so that we can do database operations by</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //applying do evrything and do nothing principle</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">CreateTransaction</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _objTran = _context.</span><span class="enlighter-m3">Database</span><span class="enlighter-text">.</span><span class="enlighter-m3">BeginTransaction</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //If all the Transactions are completed successfuly then we need to call this Commit() </span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //method to Save the changes permanently in the database</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Commit</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _objTran.</span><span class="enlighter-m3">Commit</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //If atleast one of the Transaction is Failed then we need to call this Rollback() </span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //method to Rollback the database changes to its previous state</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Rollback</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _objTran.</span><span class="enlighter-m3">Rollback</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _objTran.</span><span class="enlighter-m3">Dispose</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //This Save() Method Implement DbContext Class SaveChanges method so whenever we do a transaction we need to</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">       </span><span class="enlighter-c0"> //call this Save() method so that it will make the changes in the database</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                _context.</span><span class="enlighter-m3">SaveChanges</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">DbEntityValidationException dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationErrors </span><span class="enlighter-k8">in</span><span class="enlighter-text"> dbEx.</span><span class="enlighter-m3">EntityValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationError </span><span class="enlighter-k8">in</span><span class="enlighter-text"> validationErrors.</span><span class="enlighter-m3">ValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                        _errorMessage += string.</span><span class="enlighter-m3">Format</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Property: {0} Error: {1}"</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">PropertyName</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">ErrorMessage</span><span class="enlighter-g1">)</span><span class="enlighter-text"> + Environment.</span><span class="enlighter-m3">NewLine</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">Exception</span><span class="enlighter-g1">(</span><span class="enlighter-text">_errorMessage, dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">protected</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Dispose</span><span class="enlighter-g1">(</span><span class="enlighter-k5">bool</span><span class="enlighter-text"> disposing</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">!_disposed</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">disposing</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    _context.</span><span class="enlighter-m3">Dispose</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _disposed = </span><span class="enlighter-e0">true</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text"> </span><span class="enlighter-k0">where</span><span class="enlighter-text"> T : </span><span class="enlighter-k0">class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">_repositories == </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                _repositories = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> Dictionary</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">string, </span><span class="enlighter-k0">object</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k2">var</span><span class="enlighter-text"> type = </span><span class="enlighter-k3">typeof</span><span class="enlighter-g1">(</span><span class="enlighter-text">T</span><span class="enlighter-g1">)</span><span class="enlighter-text">.</span><span class="enlighter-m3">Name</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">!_repositories.</span><span class="enlighter-m3">ContainsKey</span><span class="enlighter-g1">(</span><span class="enlighter-text">type</span><span class="enlighter-g1">))</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k2">var</span><span class="enlighter-text"> repositoryType = </span><span class="enlighter-k3">typeof</span><span class="enlighter-g1">(</span><span class="enlighter-text">GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k2">var</span><span class="enlighter-text"> repositoryInstance = Activator.</span><span class="enlighter-m3">CreateInstance</span><span class="enlighter-g1">(</span><span class="enlighter-text">repositoryType.</span><span class="enlighter-m3">MakeGenericType</span><span class="enlighter-g1">(</span><span class="enlighter-k3">typeof</span><span class="enlighter-g1">(</span><span class="enlighter-text">T</span><span class="enlighter-g1">))</span><span class="enlighter-text">, _context</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                _repositories.</span><span class="enlighter-m3">Add</span><span class="enlighter-g1">(</span><span class="enlighter-text">type, repositoryInstance</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;)</span><span class="enlighter-text">_repositories</span><span class="enlighter-g1">[</span><span class="enlighter-text">type</span><span class="enlighter-g1">]</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using RepositoryUsingEFinMVC.GenericRepository;
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Validation;

namespace RepositoryUsingEFinMVC.UnitOfWork
{
    public class UnitOfWork&lt;TContext&gt; : IUnitOfWork&lt;TContext&gt;, IDisposable
         where TContext : DbContext, new()
    {
        //Here TContext is nothing but your DBContext class
        //In our example it is EmployeeDBContext class
        private readonly TContext _context;
        private bool _disposed;
        private string _errorMessage = string.Empty;
        private DbContextTransaction _objTran;
        private Dictionary&lt;string, object&gt; _repositories;

        //Using the Constructor we are initializing the _context variable is nothing but
        //we are storing the DBContext (EmployeeDBContext) object in _context variable
        public UnitOfWork()
        {
            _context = new TContext();
        }

        //The Dispose() method is used to free unmanaged resources like files, 
        //database connections etc. at any time.
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        //This Context property will return the DBContext object i.e. (EmployeeDBContext) object
        public TContext Context
        {
            get { return _context; }
        }

        //This CreateTransaction() method will create a database Trnasaction so that we can do database operations by
        //applying do evrything and do nothing principle
        public void CreateTransaction()
        {
            _objTran = _context.Database.BeginTransaction();
        }

        //If all the Transactions are completed successfuly then we need to call this Commit() 
        //method to Save the changes permanently in the database
        public void Commit()
        {
            _objTran.Commit();
        }

        //If atleast one of the Transaction is Failed then we need to call this Rollback() 
        //method to Rollback the database changes to its previous state
        public void Rollback()
        {
            _objTran.Rollback();
            _objTran.Dispose();
        }

        //This Save() Method Implement DbContext Class SaveChanges method so whenever we do a transaction we need to
        //call this Save() method so that it will make the changes in the database
        public void Save()
        {
            try
            {
                _context.SaveChanges();
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage) + Environment.NewLine;
                throw new Exception(_errorMessage, dbEx);
            }
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!_disposed)
                if (disposing)
                    _context.Dispose();
            _disposed = true;
        }
        
        public GenericRepository&lt;T&gt; GenericRepository&lt;T&gt;() where T : class
        {
            if (_repositories == null)
                _repositories = new Dictionary&lt;string, object&gt;();

            var type = typeof(T).Name;

            if (!_repositories.ContainsKey(type))
            {
                var repositoryType = typeof(GenericRepository&lt;T&gt;);
                var repositoryInstance = Activator.CreateInstance(repositoryType.MakeGenericType(typeof(T)), _context);
                _repositories.Add(type, repositoryInstance);
            }
            return (GenericRepository&lt;T&gt;)_repositories[type];
        }
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using RepositoryUsingEFinMVC.GenericRepository;
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Validation;

namespace RepositoryUsingEFinMVC.UnitOfWork
{
    public class UnitOfWork&lt;TContext&gt; : IUnitOfWork&lt;TContext&gt;, IDisposable
         where TContext : DbContext, new()
    {
        //Here TContext is nothing but your DBContext class
        //In our example it is EmployeeDBContext class
        private readonly TContext _context;
        private bool _disposed;
        private string _errorMessage = string.Empty;
        private DbContextTransaction _objTran;
        private Dictionary&lt;string, object&gt; _repositories;

        //Using the Constructor we are initializing the _context variable is nothing but
        //we are storing the DBContext (EmployeeDBContext) object in _context variable
        public UnitOfWork()
        {
            _context = new TContext();
        }

        //The Dispose() method is used to free unmanaged resources like files, 
        //database connections etc. at any time.
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        //This Context property will return the DBContext object i.e. (EmployeeDBContext) object
        public TContext Context
        {
            get { return _context; }
        }

        //This CreateTransaction() method will create a database Trnasaction so that we can do database operations by
        //applying do evrything and do nothing principle
        public void CreateTransaction()
        {
            _objTran = _context.Database.BeginTransaction();
        }

        //If all the Transactions are completed successfuly then we need to call this Commit() 
        //method to Save the changes permanently in the database
        public void Commit()
        {
            _objTran.Commit();
        }

        //If atleast one of the Transaction is Failed then we need to call this Rollback() 
        //method to Rollback the database changes to its previous state
        public void Rollback()
        {
            _objTran.Rollback();
            _objTran.Dispose();
        }

        //This Save() Method Implement DbContext Class SaveChanges method so whenever we do a transaction we need to
        //call this Save() method so that it will make the changes in the database
        public void Save()
        {
            try
            {
                _context.SaveChanges();
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage) + Environment.NewLine;
                throw new Exception(_errorMessage, dbEx);
            }
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!_disposed)
                if (disposing)
                    _context.Dispose();
            _disposed = true;
        }
        
        public GenericRepository&lt;T&gt; GenericRepository&lt;T&gt;() where T : class
        {
            if (_repositories == null)
                _repositories = new Dictionary&lt;string, object&gt;();

            var type = typeof(T).Name;

            if (!_repositories.ContainsKey(type))
            {
                var repositoryType = typeof(GenericRepository&lt;T&gt;);
                var repositoryInstance = Activator.CreateInstance(repositoryType.MakeGenericType(typeof(T)), _context);
                _repositories.Add(type, repositoryInstance);
            }
            return (GenericRepository&lt;T&gt;)_repositories[type];
        }
    }
}
</pre><h6 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Next, Modify the IGenericRepository.cs file as shown below</strong></span></h6><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">interface</span><span class="enlighter-text"> IGenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-k0">where</span><span class="enlighter-text"> T : </span><span class="enlighter-k0">class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetAll</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        T </span><span class="enlighter-m0">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-k0">object</span><span class="enlighter-text"> id</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Insert</span><span class="enlighter-g1">(</span><span class="enlighter-text">T obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Update</span><span class="enlighter-g1">(</span><span class="enlighter-text">T obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">T obj</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using System.Collections.Generic;
namespace RepositoryUsingEFinMVC.GenericRepository
{
    public interface IGenericRepository&lt;T&gt; where T : class
    {
        IEnumerable&lt;T&gt; GetAll();
        T GetById(object id);
        void Insert(T obj);
        void Update(T obj);
        void Delete(T obj);
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using System.Collections.Generic;
namespace RepositoryUsingEFinMVC.GenericRepository
{
    public interface IGenericRepository&lt;T&gt; where T : class
    {
        IEnumerable&lt;T&gt; GetAll();
        T GetById(object id);
        void Insert(T obj);
        void Update(T obj);
        void Delete(T obj);
    }
}
</pre><h6 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Next, modify the GenericRepository.cs class file as shown below</strong></span></h6><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.DAL;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.UnitOfWork;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Data.Entity;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Data.Entity.Validation;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Linq;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">class</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> : IGenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">, IDisposable </span><span class="enlighter-k0">where</span><span class="enlighter-text"> T : </span><span class="enlighter-k0">class</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> IDbSet</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> _entities;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> string _errorMessage = string.</span><span class="enlighter-m3">Empty</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> </span><span class="enlighter-k5">bool</span><span class="enlighter-text"> _isDisposed;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">GenericRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">IUnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">EmployeeDBContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> unitOfWork</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            : </span><span class="enlighter-k9">this</span><span class="enlighter-g1">(</span><span class="enlighter-text">unitOfWork.</span><span class="enlighter-m3">Context</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">GenericRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeDBContext context</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _isDisposed = </span><span class="enlighter-e0">false</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            Context = context;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> EmployeeDBContext Context </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">get</span><span class="enlighter-text">; </span><span class="enlighter-k0">set</span><span class="enlighter-text">; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> IQueryable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> Table</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">get</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Entities; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">protected</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> IDbSet</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> Entities</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">get</span><span class="enlighter-text"> </span><span class="enlighter-g1">{</span><span class="enlighter-text"> </span><span class="enlighter-k0">return</span><span class="enlighter-text"> _entities ?? </span><span class="enlighter-g1">(</span><span class="enlighter-text">_entities = Context.</span><span class="enlighter-m3">Set</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;())</span><span class="enlighter-text">; </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Dispose</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">Context != </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Context.</span><span class="enlighter-m3">Dispose</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            _isDisposed = </span><span class="enlighter-e0">true</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetAll</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Entities.</span><span class="enlighter-m3">ToList</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> T </span><span class="enlighter-m0">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-k0">object</span><span class="enlighter-text"> id</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Entities.</span><span class="enlighter-m3">Find</span><span class="enlighter-g1">(</span><span class="enlighter-text">id</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Insert</span><span class="enlighter-g1">(</span><span class="enlighter-text">T entity</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">entity == </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">ArgumentNullException</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"entity"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Entities.</span><span class="enlighter-m3">Add</span><span class="enlighter-g1">(</span><span class="enlighter-text">entity</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">Context == </span><span class="enlighter-e1">null</span><span class="enlighter-text"> || _isDisposed</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    Context = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeDBContext</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">               </span><span class="enlighter-c0"> //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be </span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">               </span><span class="enlighter-c0"> //called with Unit of work</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">DbEntityValidationException dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationErrors </span><span class="enlighter-k8">in</span><span class="enlighter-text"> dbEx.</span><span class="enlighter-m3">EntityValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationError </span><span class="enlighter-k8">in</span><span class="enlighter-text"> validationErrors.</span><span class="enlighter-m3">ValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                        _errorMessage += string.</span><span class="enlighter-m3">Format</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Property: {0} Error: {1}"</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">PropertyName</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">ErrorMessage</span><span class="enlighter-g1">)</span><span class="enlighter-text"> + Environment.</span><span class="enlighter-m3">NewLine</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">Exception</span><span class="enlighter-g1">(</span><span class="enlighter-text">_errorMessage, dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">BulkInsert</span><span class="enlighter-g1">(</span><span class="enlighter-text">IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> entities</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">entities == </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">ArgumentNullException</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"entities"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Context.</span><span class="enlighter-m3">Configuration</span><span class="enlighter-text">.</span><span class="enlighter-m3">AutoDetectChangesEnabled</span><span class="enlighter-text"> = </span><span class="enlighter-e0">false</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Context.</span><span class="enlighter-m3">Set</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">T</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text">.</span><span class="enlighter-m3">AddRange</span><span class="enlighter-g1">(</span><span class="enlighter-text">entities</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Context.</span><span class="enlighter-m3">SaveChanges</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">DbEntityValidationException dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationErrors </span><span class="enlighter-k8">in</span><span class="enlighter-text"> dbEx.</span><span class="enlighter-m3">EntityValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationError </span><span class="enlighter-k8">in</span><span class="enlighter-text"> validationErrors.</span><span class="enlighter-m3">ValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                        _errorMessage += string.</span><span class="enlighter-m3">Format</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Property: {0} Error: {1}"</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">PropertyName</span><span class="enlighter-text">,</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                                             validationError.</span><span class="enlighter-m3">ErrorMessage</span><span class="enlighter-g1">)</span><span class="enlighter-text"> + Environment.</span><span class="enlighter-m3">NewLine</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">Exception</span><span class="enlighter-g1">(</span><span class="enlighter-text">_errorMessage, dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Update</span><span class="enlighter-g1">(</span><span class="enlighter-text">T entity</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">entity == </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">ArgumentNullException</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"entity"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">Context == </span><span class="enlighter-e1">null</span><span class="enlighter-text"> || _isDisposed</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    Context = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeDBContext</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-m0">SetEntryModified</span><span class="enlighter-g1">(</span><span class="enlighter-text">entity</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">               </span><span class="enlighter-c0"> //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">DbEntityValidationException dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationErrors </span><span class="enlighter-k8">in</span><span class="enlighter-text"> dbEx.</span><span class="enlighter-m3">EntityValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationError </span><span class="enlighter-k8">in</span><span class="enlighter-text"> validationErrors.</span><span class="enlighter-m3">ValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                        _errorMessage += Environment.</span><span class="enlighter-m3">NewLine</span><span class="enlighter-text"> + string.</span><span class="enlighter-m3">Format</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Property: {0} Error: {1}"</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">PropertyName</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">ErrorMessage</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">Exception</span><span class="enlighter-g1">(</span><span class="enlighter-text">_errorMessage, dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">T entity</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">entity == </span><span class="enlighter-e1">null</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">ArgumentNullException</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"entity"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">Context == </span><span class="enlighter-e1">null</span><span class="enlighter-text"> || _isDisposed</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    Context = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeDBContext</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                Entities.</span><span class="enlighter-m3">Remove</span><span class="enlighter-g1">(</span><span class="enlighter-text">entity</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">               </span><span class="enlighter-c0"> //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">DbEntityValidationException dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationErrors </span><span class="enlighter-k8">in</span><span class="enlighter-text"> dbEx.</span><span class="enlighter-m3">EntityValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k1">foreach</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-k2">var</span><span class="enlighter-text"> validationError </span><span class="enlighter-k8">in</span><span class="enlighter-text"> validationErrors.</span><span class="enlighter-m3">ValidationErrors</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                        _errorMessage += Environment.</span><span class="enlighter-m3">NewLine</span><span class="enlighter-text"> + string.</span><span class="enlighter-m3">Format</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Property: {0} Error: {1}"</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">PropertyName</span><span class="enlighter-text">, validationError.</span><span class="enlighter-m3">ErrorMessage</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">throw</span><span class="enlighter-text"> </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">Exception</span><span class="enlighter-g1">(</span><span class="enlighter-text">_errorMessage, dbEx</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">virtual</span><span class="enlighter-text"> </span><span class="enlighter-k5">void</span><span class="enlighter-text"> </span><span class="enlighter-m0">SetEntryModified</span><span class="enlighter-g1">(</span><span class="enlighter-text">T entity</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            Context.</span><span class="enlighter-m3">Entry</span><span class="enlighter-g1">(</span><span class="enlighter-text">entity</span><span class="enlighter-g1">)</span><span class="enlighter-text">.</span><span class="enlighter-m3">State</span><span class="enlighter-text"> = EntityState.</span><span class="enlighter-m3">Modified</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.UnitOfWork;
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Validation;
using System.Linq;

namespace RepositoryUsingEFinMVC.GenericRepository
{
    public class GenericRepository&lt;T&gt; : IGenericRepository&lt;T&gt;, IDisposable where T : class
    {
        private IDbSet&lt;T&gt; _entities;
        private string _errorMessage = string.Empty;
        private bool _isDisposed;

        public GenericRepository(IUnitOfWork&lt;EmployeeDBContext&gt; unitOfWork)
            : this(unitOfWork.Context)
        {
        }

        public GenericRepository(EmployeeDBContext context)
        {
            _isDisposed = false;
            Context = context;
        }

        public EmployeeDBContext Context { get; set; }

        public virtual IQueryable&lt;T&gt; Table
        {
            get { return Entities; }
        }

        protected virtual IDbSet&lt;T&gt; Entities
        {
            get { return _entities ?? (_entities = Context.Set&lt;T&gt;()); }
        }

        public void Dispose()
        {
            if (Context != null)
                Context.Dispose();
            _isDisposed = true;
        }

        public virtual IEnumerable&lt;T&gt; GetAll()
        {
            return Entities.ToList();
        }

        public virtual T GetById(object id)
        {
            return Entities.Find(id);
        }

        public virtual void Insert(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");
                Entities.Add(entity);

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be 
                //called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage) + Environment.NewLine;
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public void BulkInsert(IEnumerable&lt;T&gt; entities)
        {
            try
            {
                if (entities == null)
                {
                    throw new ArgumentNullException("entities");
                }
                Context.Configuration.AutoDetectChangesEnabled = false;
                Context.Set&lt;T&gt;().AddRange(entities);
                Context.SaveChanges();
            }
            catch (DbEntityValidationException dbEx)
            {

                foreach (var validationErrors in dbEx.EntityValidationErrors)
                {
                    foreach (var validationError in validationErrors.ValidationErrors)
                    {
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName,
                                             validationError.ErrorMessage) + Environment.NewLine;
                    }
                }
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void Update(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                SetEntryModified(entity);
                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += Environment.NewLine + string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);

                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void Delete(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                Entities.Remove(entity);
                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += Environment.NewLine + string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void SetEntryModified(T entity)
        {
            Context.Entry(entity).State = EntityState.Modified;
        }
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.UnitOfWork;
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Data.Entity.Validation;
using System.Linq;

namespace RepositoryUsingEFinMVC.GenericRepository
{
    public class GenericRepository&lt;T&gt; : IGenericRepository&lt;T&gt;, IDisposable where T : class
    {
        private IDbSet&lt;T&gt; _entities;
        private string _errorMessage = string.Empty;
        private bool _isDisposed;

        public GenericRepository(IUnitOfWork&lt;EmployeeDBContext&gt; unitOfWork)
            : this(unitOfWork.Context)
        {
        }

        public GenericRepository(EmployeeDBContext context)
        {
            _isDisposed = false;
            Context = context;
        }

        public EmployeeDBContext Context { get; set; }

        public virtual IQueryable&lt;T&gt; Table
        {
            get { return Entities; }
        }

        protected virtual IDbSet&lt;T&gt; Entities
        {
            get { return _entities ?? (_entities = Context.Set&lt;T&gt;()); }
        }

        public void Dispose()
        {
            if (Context != null)
                Context.Dispose();
            _isDisposed = true;
        }

        public virtual IEnumerable&lt;T&gt; GetAll()
        {
            return Entities.ToList();
        }

        public virtual T GetById(object id)
        {
            return Entities.Find(id);
        }

        public virtual void Insert(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");
                Entities.Add(entity);

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be 
                //called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage) + Environment.NewLine;
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public void BulkInsert(IEnumerable&lt;T&gt; entities)
        {
            try
            {
                if (entities == null)
                {
                    throw new ArgumentNullException("entities");
                }
                Context.Configuration.AutoDetectChangesEnabled = false;
                Context.Set&lt;T&gt;().AddRange(entities);
                Context.SaveChanges();
            }
            catch (DbEntityValidationException dbEx)
            {

                foreach (var validationErrors in dbEx.EntityValidationErrors)
                {
                    foreach (var validationError in validationErrors.ValidationErrors)
                    {
                        _errorMessage += string.Format("Property: {0} Error: {1}", validationError.PropertyName,
                                             validationError.ErrorMessage) + Environment.NewLine;
                    }
                }
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void Update(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                SetEntryModified(entity);
                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += Environment.NewLine + string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);

                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void Delete(T entity)
        {
            try
            {
                if (entity == null)
                    throw new ArgumentNullException("entity");

                if (Context == null || _isDisposed)
                    Context = new EmployeeDBContext();

                Entities.Remove(entity);
                //Context.SaveChanges(); commented out call to SaveChanges as Context save changes will be called with Unit of work
            }
            catch (DbEntityValidationException dbEx)
            {
                foreach (var validationErrors in dbEx.EntityValidationErrors)
                    foreach (var validationError in validationErrors.ValidationErrors)
                        _errorMessage += Environment.NewLine + string.Format("Property: {0} Error: {1}", validationError.PropertyName, validationError.ErrorMessage);
                throw new Exception(_errorMessage, dbEx);
            }
        }

        public virtual void SetEntryModified(T entity)
        {
            Context.Entry(entity).State = EntityState.Modified;
        }
    }
}
</pre><h6 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Now, modify the IEmployeeRepository as shown below</strong></span></h6><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.DAL;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.Repository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">interface</span><span class="enlighter-text"> IEmployeeRepository : IGenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetEmployeesByGender</span><span class="enlighter-g1">(</span><span class="enlighter-text">string Gender</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetEmployeesByDepartment</span><span class="enlighter-g1">(</span><span class="enlighter-text">string Dept</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using System.Collections.Generic;
namespace RepositoryUsingEFinMVC.Repository
{
    public interface IEmployeeRepository : IGenericRepository&lt;Employee&gt;
    {
        IEnumerable&lt;Employee&gt; GetEmployeesByGender(string Gender);
        IEnumerable&lt;Employee&gt; GetEmployeesByDepartment(string Dept);
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using System.Collections.Generic;
namespace RepositoryUsingEFinMVC.Repository
{
    public interface IEmployeeRepository : IGenericRepository&lt;Employee&gt;
    {
        IEnumerable&lt;Employee&gt; GetEmployeesByGender(string Gender);
        IEnumerable&lt;Employee&gt; GetEmployeesByDepartment(string Dept);
    }
}
</pre><h5 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Modify the EmployeeRepository as shown below</strong></span></h5><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Linq;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.DAL;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.UnitOfWork;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.Repository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">class</span><span class="enlighter-text"> EmployeeRepository : GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text">, IEmployeeRepository</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">IUnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">EmployeeDBContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> unitOfWork</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            : </span><span class="enlighter-k0">base</span><span class="enlighter-g1">(</span><span class="enlighter-text">unitOfWork</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeDBContext context</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            : </span><span class="enlighter-k0">base</span><span class="enlighter-g1">(</span><span class="enlighter-text">context</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetEmployeesByGender</span><span class="enlighter-g1">(</span><span class="enlighter-text">string Gender</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Context.</span><span class="enlighter-m3">Employees</span><span class="enlighter-text">.</span><span class="enlighter-m3">Where</span><span class="enlighter-g1">(</span><span class="enlighter-text">emp =</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> emp.</span><span class="enlighter-m3">Gender</span><span class="enlighter-text"> == Gender</span><span class="enlighter-g1">)</span><span class="enlighter-text">.</span><span class="enlighter-m3">ToList</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> IEnumerable</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> </span><span class="enlighter-m0">GetEmployeesByDepartment</span><span class="enlighter-g1">(</span><span class="enlighter-text">string Dept</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> Context.</span><span class="enlighter-m3">Employees</span><span class="enlighter-text">.</span><span class="enlighter-m3">Where</span><span class="enlighter-g1">(</span><span class="enlighter-text">emp =</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> emp.</span><span class="enlighter-m3">Dept</span><span class="enlighter-text"> == Dept</span><span class="enlighter-g1">)</span><span class="enlighter-text">.</span><span class="enlighter-m3">ToList</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using System.Linq;
using System.Collections.Generic;
using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using RepositoryUsingEFinMVC.UnitOfWork;
namespace RepositoryUsingEFinMVC.Repository
{
    public class EmployeeRepository : GenericRepository&lt;Employee&gt;, IEmployeeRepository
    {
        public EmployeeRepository(IUnitOfWork&lt;EmployeeDBContext&gt; unitOfWork)
            : base(unitOfWork)
        {
        }

        public EmployeeRepository(EmployeeDBContext context)
            : base(context)
        {
        }

        public IEnumerable&lt;Employee&gt; GetEmployeesByGender(string Gender)
        {
            return Context.Employees.Where(emp =&gt; emp.Gender == Gender).ToList();
        }

        public IEnumerable&lt;Employee&gt; GetEmployeesByDepartment(string Dept)
        {
            return Context.Employees.Where(emp =&gt; emp.Dept == Dept).ToList();
        }
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using System.Linq;
using System.Collections.Generic;
using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using RepositoryUsingEFinMVC.UnitOfWork;
namespace RepositoryUsingEFinMVC.Repository
{
    public class EmployeeRepository : GenericRepository&lt;Employee&gt;, IEmployeeRepository
    {
        public EmployeeRepository(IUnitOfWork&lt;EmployeeDBContext&gt; unitOfWork)
            : base(unitOfWork)
        {
        }

        public EmployeeRepository(EmployeeDBContext context)
            : base(context)
        {
        }

        public IEnumerable&lt;Employee&gt; GetEmployeesByGender(string Gender)
        {
            return Context.Employees.Where(emp =&gt; emp.Gender == Gender).ToList();
        }

        public IEnumerable&lt;Employee&gt; GetEmployeesByDepartment(string Dept)
        {
            return Context.Employees.Where(emp =&gt; emp.Dept == Dept).ToList();
        }
    }
}
</pre><h6 style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;"><strong>Next, Modify the Employee Controller as shown below.</strong></span></h6><div class="enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover " bis_skin_checked="1"><div class="enlighter-toolbar-top enlighter-toolbar" bis_skin_checked="1"><div class="enlighter-btn enlighter-btn-raw" title="Plain text" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-copy" title="Copy to clipboard" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-window" title="Open code in new window" bis_skin_checked="1"></div><div class="enlighter-btn enlighter-btn-website" title="EnlighterJS 3 Syntax Highlighter" bis_skin_checked="1"></div></div><div class="enlighter" style="" bis_skin_checked="1"><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k0">using </span><span class="enlighter-k10">System;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Collections.Generic;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Linq;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Web;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.Repository;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">System.Web.Mvc;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.DAL;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.GenericRepository;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">using </span><span class="enlighter-k10">RepositoryUsingEFinMVC.UnitOfWork;</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-k0">namespace </span><span class="enlighter-k10">RepositoryUsingEFinMVC.Controllers</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-k10"></span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-k0">class</span><span class="enlighter-text"> EmployeeController : Controller</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> UnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">EmployeeDBContext</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> unitOfWork = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> UnitOfWork</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">EmployeeDBContext</span><span class="enlighter-g1">&gt;()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;</span><span class="enlighter-text"> repository;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">private</span><span class="enlighter-text"> IEmployeeRepository employeeRepository;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeController</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">           </span><span class="enlighter-c0"> //If you want to use Generic Repository with Unit of work</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            repository = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> GenericRepository</span><span class="enlighter-g1">&lt;</span><span class="enlighter-text">Employee</span><span class="enlighter-g1">&gt;(</span><span class="enlighter-text">unitOfWork</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">           </span><span class="enlighter-c0"> //If you want to use Specific Repository with Unit of work</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            employeeRepository = </span><span class="enlighter-k3">new</span><span class="enlighter-text"> </span><span class="enlighter-m0">EmployeeRepository</span><span class="enlighter-g1">(</span><span class="enlighter-text">unitOfWork</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpGet</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">Index</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k2">var</span><span class="enlighter-text"> model = repository.</span><span class="enlighter-m3">GetAll</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">           </span><span class="enlighter-c0"> //Using Specific Repository</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">           </span><span class="enlighter-c0"> //var model = employeeRepository.GetEmployeesByDepartment(1);</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpGet</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">AddEmployee</span><span class="enlighter-g1">()</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpPost</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">AddEmployee</span><span class="enlighter-g1">(</span><span class="enlighter-text">Employee model</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">try</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                unitOfWork.</span><span class="enlighter-m3">CreateTransaction</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">ModelState.</span><span class="enlighter-m3">IsValid</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    repository.</span><span class="enlighter-m3">Insert</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    unitOfWork.</span><span class="enlighter-m3">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                   </span><span class="enlighter-c0"> //Do Some Other Task with the Database</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                   </span><span class="enlighter-c0"> //If everything is working then commit the transaction else rollback the transaction</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    unitOfWork.</span><span class="enlighter-m3">Commit</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                    </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">RedirectToAction</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Index"</span><span class="enlighter-text">, </span><span class="enlighter-s0">"Employee"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">catch</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">Exception ex</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">               </span><span class="enlighter-c0"> //Log the exception and rollback the transaction</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                unitOfWork.</span><span class="enlighter-m3">Rollback</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpGet</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">EditEmployee</span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> EmployeeId</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            Employee model = repository.</span><span class="enlighter-m3">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeId</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpPost</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">EditEmployee</span><span class="enlighter-g1">(</span><span class="enlighter-text">Employee model</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">if</span><span class="enlighter-text"> </span><span class="enlighter-g1">(</span><span class="enlighter-text">ModelState.</span><span class="enlighter-m3">IsValid</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                repository.</span><span class="enlighter-m3">Update</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                unitOfWork.</span><span class="enlighter-m3">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">RedirectToAction</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Index"</span><span class="enlighter-text">, </span><span class="enlighter-s0">"Employee"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k1">else</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">                </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpGet</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">DeleteEmployee</span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> EmployeeId</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            Employee model = repository.</span><span class="enlighter-m3">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeId</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">View</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">[</span><span class="enlighter-text">HttpPost</span><span class="enlighter-g1">]</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-k0">public</span><span class="enlighter-text"> ActionResult </span><span class="enlighter-m0">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-k5">int</span><span class="enlighter-text"> EmployeeID</span><span class="enlighter-g1">)</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">{</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            Employee model = repository.</span><span class="enlighter-m3">GetById</span><span class="enlighter-g1">(</span><span class="enlighter-text">EmployeeID</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            repository.</span><span class="enlighter-m3">Delete</span><span class="enlighter-g1">(</span><span class="enlighter-text">model</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            unitOfWork.</span><span class="enlighter-m3">Save</span><span class="enlighter-g1">()</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">            </span><span class="enlighter-k0">return</span><span class="enlighter-text"> </span><span class="enlighter-m0">RedirectToAction</span><span class="enlighter-g1">(</span><span class="enlighter-s0">"Index"</span><span class="enlighter-text">, </span><span class="enlighter-s0">"Employee"</span><span class="enlighter-g1">)</span><span class="enlighter-text">;</span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">        </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text">    </span><span class="enlighter-g1">}</span><span class="enlighter-text"></span></div></div><div class="" bis_skin_checked="1"><div bis_skin_checked="1"><span class="enlighter-text"></span><span class="enlighter-g1">}</span></div></div></div><div class="enlighter-raw" bis_skin_checked="1">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using RepositoryUsingEFinMVC.Repository;
using System.Web.Mvc;
using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using RepositoryUsingEFinMVC.UnitOfWork;

namespace RepositoryUsingEFinMVC.Controllers
{
    public class EmployeeController : Controller
    {
        private UnitOfWork&lt;EmployeeDBContext&gt; unitOfWork = new UnitOfWork&lt;EmployeeDBContext&gt;();
        private GenericRepository&lt;Employee&gt; repository;
        private IEmployeeRepository employeeRepository;

        public EmployeeController()
        {
            //If you want to use Generic Repository with Unit of work
            repository = new GenericRepository&lt;Employee&gt;(unitOfWork);

            //If you want to use Specific Repository with Unit of work
            employeeRepository = new EmployeeRepository(unitOfWork);
        }
        
        [HttpGet]
        public ActionResult Index()
        {
            var model = repository.GetAll();
            //Using Specific Repository
            //var model = employeeRepository.GetEmployeesByDepartment(1);
            return View(model);
        }

        [HttpGet]
        public ActionResult AddEmployee()
        {
            return View();
        }

        [HttpPost]
        public ActionResult AddEmployee(Employee model)
        {
            try
            {
                unitOfWork.CreateTransaction();

                if (ModelState.IsValid)
                {
                    repository.Insert(model);
                    unitOfWork.Save();

                    //Do Some Other Task with the Database

                    //If everything is working then commit the transaction else rollback the transaction
                    unitOfWork.Commit();
                    return RedirectToAction("Index", "Employee");
                }
            }
            catch (Exception ex)
            {
                //Log the exception and rollback the transaction
                unitOfWork.Rollback();
            }

            return View();
        }

        [HttpGet]
        public ActionResult EditEmployee(int EmployeeId)
        {
            Employee model = repository.GetById(EmployeeId);
            return View(model);
        }

        [HttpPost]
        public ActionResult EditEmployee(Employee model)
        {
            if (ModelState.IsValid)
            {
                repository.Update(model);
                unitOfWork.Save();

                return RedirectToAction("Index", "Employee");
            }
            else
            {
                return View(model);
            }
        }

        [HttpGet]
        public ActionResult DeleteEmployee(int EmployeeId)
        {
            Employee model = repository.GetById(EmployeeId);
            return View(model);
        }

        [HttpPost]
        public ActionResult Delete(int EmployeeID)
        {
            Employee model = repository.GetById(EmployeeID);

            repository.Delete(model);
            unitOfWork.Save();

            return RedirectToAction("Index", "Employee");
        }
    }
}</div><div class="enlighter-toolbar-bottom enlighter-toolbar" bis_skin_checked="1"></div></div><pre class="EnlighterJSRAW enlighter-origin" data-enlighter-language="null">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using RepositoryUsingEFinMVC.Repository;
using System.Web.Mvc;
using RepositoryUsingEFinMVC.DAL;
using RepositoryUsingEFinMVC.GenericRepository;
using RepositoryUsingEFinMVC.UnitOfWork;

namespace RepositoryUsingEFinMVC.Controllers
{
    public class EmployeeController : Controller
    {
        private UnitOfWork&lt;EmployeeDBContext&gt; unitOfWork = new UnitOfWork&lt;EmployeeDBContext&gt;();
        private GenericRepository&lt;Employee&gt; repository;
        private IEmployeeRepository employeeRepository;

        public EmployeeController()
        {
            //If you want to use Generic Repository with Unit of work
            repository = new GenericRepository&lt;Employee&gt;(unitOfWork);

            //If you want to use Specific Repository with Unit of work
            employeeRepository = new EmployeeRepository(unitOfWork);
        }
        
        [HttpGet]
        public ActionResult Index()
        {
            var model = repository.GetAll();
            //Using Specific Repository
            //var model = employeeRepository.GetEmployeesByDepartment(1);
            return View(model);
        }

        [HttpGet]
        public ActionResult AddEmployee()
        {
            return View();
        }

        [HttpPost]
        public ActionResult AddEmployee(Employee model)
        {
            try
            {
                unitOfWork.CreateTransaction();

                if (ModelState.IsValid)
                {
                    repository.Insert(model);
                    unitOfWork.Save();

                    //Do Some Other Task with the Database

                    //If everything is working then commit the transaction else rollback the transaction
                    unitOfWork.Commit();
                    return RedirectToAction("Index", "Employee");
                }
            }
            catch (Exception ex)
            {
                //Log the exception and rollback the transaction
                unitOfWork.Rollback();
            }

            return View();
        }

        [HttpGet]
        public ActionResult EditEmployee(int EmployeeId)
        {
            Employee model = repository.GetById(EmployeeId);
            return View(model);
        }

        [HttpPost]
        public ActionResult EditEmployee(Employee model)
        {
            if (ModelState.IsValid)
            {
                repository.Update(model);
                unitOfWork.Save();

                return RedirectToAction("Index", "Employee");
            }
            else
            {
                return View(model);
            }
        }

        [HttpGet]
        public ActionResult DeleteEmployee(int EmployeeId)
        {
            Employee model = repository.GetById(EmployeeId);
            return View(model);
        }

        [HttpPost]
        public ActionResult Delete(int EmployeeID)
        {
            Employee model = repository.GetById(EmployeeID);

            repository.Delete(model);
            unitOfWork.Save();

            return RedirectToAction("Index", "Employee");
        }
    }
}
</pre><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">Now run the application and see everything is working as expected. In the next article, I am going to discuss the Factory Design Pattern in C# with some examples. </span></p><p style="text-align: justify;"><span style="font-family: arial, helvetica, sans-serif; color: #000000;">In the next article, I am going to discuss the <a href="https://dotnettutorials.net/lesson/introduction-to-inversion-of-control/"><strong>Inversion of Control</strong>&nbsp;<strong>in C#</strong></a>&nbsp;with examples. Here, in this article, I try to explain the <strong>Unit of Work in C# Repository Pattern</strong> using ASP.NET MVC application with Entity Framework step by step with a simple example. I hope you enjoy this article.</span></p><div class="code-block code-block-9" style="margin: 8px 0; clear: both;" bis_skin_checked="1">
<ins class="adsbygoogle" style="display: block; height: 503px;" data-ad-format="autorelaxed" data-ad-client="ca-pub-5996718494925719" data-ad-slot="9346528283" data-adsbygoogle-status="done" data-ad-status="filled"><ins id="aswift_6_expand" style="border: none; height: 503px; width: 839px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-table;" tabindex="0" title="Advertisement" aria-label="Advertisement"><ins id="aswift_6_anchor" style="border: none; height: 503px; width: 839px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: block;"><iframe id="aswift_6" name="aswift_6" style="top: 0px; border: 0px; width: 839px; height: 503px; left: -10000px !important; position: absolute !important;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" width="839" height="503" frameborder="0" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5996718494925719&amp;output=html&amp;h=503&amp;slotname=9346528283&amp;adk=3254398789&amp;adf=1885298802&amp;pi=t.ma~as.9346528283&amp;w=839&amp;cr_col=4&amp;cr_row=2&amp;fwrn=2&amp;lmt=1630832814&amp;rafmt=9&amp;psa=1&amp;format=839x503&amp;url=https%3A%2F%2Fdotnettutorials.net%2Flesson%2Funit-of-work-csharp-mvc%2F&amp;flash=0&amp;crui=image_stacked&amp;fwr=0&amp;wgl=1&amp;adsid=ChEI8JyWigYQ-qXejJrQzMrtARJMAA24gBL76eJNMGRsYSbaLIveb8EtOm03KXzkkjr5uyAzvxt0Xb3R62mGbMn8TGlAkNKjkOZAk5D4rTg1M6wINWgUQJjlEJ_zraJuTg&amp;uach=WyJXaW5kb3dzIiwiMTAuMCIsIng4NiIsIiIsIjkyLjAuNDUxNS4xMzEiLFtdLG51bGwsbnVsbCxudWxsXQ..&amp;tt_state=W3siaXNzdWVyT3JpZ2luIjoiaHR0cHM6Ly9hdHRlc3RhdGlvbi5hbmRyb2lkLmNvbSIsInN0YXRlIjo3fV0.&amp;dt=1631994736602&amp;bpp=1&amp;bdt=247&amp;idt=382&amp;shv=r20210915&amp;mjsv=m202109170101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie=ID%3Db053040118017feb-22274f0757ca00e5%3AT%3D1631993152%3ART%3D1631993152%3AS%3DALNI_MaCcRtTD8PQWV3P4rf7M3m5HKFUtw&amp;prev_fmts=0x0%2C839x104&amp;nras=2&amp;correlator=1322494233562&amp;frm=20&amp;pv=1&amp;ga_vid=1140958189.1631993152&amp;ga_sid=1631994737&amp;ga_hid=1407760011&amp;ga_fc=0&amp;u_tz=-180&amp;u_his=4&amp;u_java=0&amp;u_h=720&amp;u_w=1280&amp;u_ah=680&amp;u_aw=1280&amp;u_cd=24&amp;u_nplug=3&amp;u_nmime=4&amp;adx=392&amp;ady=13787&amp;biw=1263&amp;bih=609&amp;scr_x=0&amp;scr_y=13947&amp;eid=44747620%2C44750894%2C21067496&amp;oid=3&amp;pvsid=4376420000064149&amp;pem=208&amp;ref=https%3A%2F%2Fwww.google.com%2F&amp;eae=0&amp;fc=1920&amp;brdim=0%2C0%2C0%2C0%2C1280%2C0%2C1280%2C680%2C1280%2C609&amp;vis=1&amp;rsz=%7C%7CeE%7C&amp;abl=CS&amp;pfx=0&amp;fu=128&amp;bc=31&amp;jar=2021-09-18-19&amp;ifi=7&amp;uci=a!7&amp;fsb=1&amp;xpc=pFxxctszz7&amp;p=https%3A//dotnettutorials.net&amp;dtd=388" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" data-google-container-id="a!7" bis_size="{&quot;x&quot;:391,&quot;y&quot;:13787,&quot;w&quot;:839,&quot;h&quot;:503,&quot;abs_x&quot;:391,&quot;abs_y&quot;:13787}" bis_id="fr_k1j98l3qa7on86elkhlyuc" bis_depth="0" bis_chainid="1" data-google-query-id="CNLD05SmifMCFYQdwwodUBYDcQ" data-load-complete="true"></iframe></ins></ins></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div>
